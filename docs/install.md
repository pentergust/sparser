# Установка

Перед тем как мы приступим к установке, давайте разберёмся, что такое
**ядро** и что такое **обёртки**.
Хоть это и несколько устаревший термины для проекта, для данного
раздела они подойдут как нельзя лучше.

- **Ядро** представляет собой сердце проекта. Тут находится парсер,
  генератор сообщений, хранилище для работы пользователей и прочие
  внутренние компоненты, которые могут вам понадобиться при работе
  с расписанием.
- **Обёртка** это некоторая платформа, которая позволяет
  взаимодействовать с ядром. На данный момент доступны обёртки для
  Telegram, консоли.

Итак, для начала мы установим **ядро**, а после уже **обёртки**.
Это будет не сложно.

!!! info "ВК бот устарел"

    На данный момент разработка бота для ВКонтакте прекращено.
    Он базируется на устаревшей версии v5.8.x.
    Если вас интересует его установка, то пройдите в репозиторий:
    [splatform/vk](https://git.miroq.ru/splatform/vk).

## Подготовка

Перед тем как приступить к установке проекта, убедитесь что у вас
установлен `python` версии 3.11 и выше, а также `git` и
[uv](https://docs.astral.sh/uv).
Для управления всеми зависимостями мы будем использовать современный
инструмент _uv_.
Если вы ещё не использовали его, советуем ознакомиться с его
функционалом.

## Ядро

Теперь у нас готово всё для установки ядра проекта.
Для начала необходимо клонировать репозиторий проекта в удобное вам место.

```bash
git clone https://git.miroq.ru/splatform/telegram sp
```

!!! tip "Выбор ветки"

    Помимо обычно установки вы можете выбрать ветку `v6.x` с поддержкой
    всех обновлений шестой версии. Например v6.6, v6.10, до v7.
    Это гарантирует некоторую стабильность при обновлениях/

    ```bash
    git clone -b v6.x https://git.miroq.ru/splatform/telegram sp
    ```

    Или вы можете переключиться при ранее клонированном репозитории:

    ```bash
    git checkout v6.x
    ```

Воспользуйтесь `poetry`, чтобы установить все необходимые зависимости
и настроить рабочее окружение python.

```bash
uv sync
```

Вот и всё, ядро установлено, проверить что всё работает вы сможете
при помощи `spcli.py`.
Воспользуйтесь следующей командой чтобы узнать о версии проекта.

```bash
uv run spcli.py -v
```

!!! note "Про CLI"

    Более подробно узнать как пользоваться `spcli` вы можете узнать
    в разделе [CLI](wrappers/cli.md).

## Telegram бот

Когда вы скачивали ядро, то вместе с ним скачали и Telegram бота.
Они поставляются вместе, клонировать репозиторий нам не придётся.

Как и в случае с ядром, нам будет необходимо установить зависимости
для работы бота:

```bash
uv sync --group telegram
```

Когда все зависимости будут установлены, вы можете перейти к простой
первоначальной настройке бота.
Для этого скопируйте файл `.env.dist` в `.env`.
И поместите в поле `TELEGRAM_TOKEN` токен от вашего бота.

После всех настроек, вы можете запустить бота, также через `uv`:

```bash
uv run -m sp_tg
```

## После установки

Если вы планируете использовать бота на сервер, мы рекомендуем
создать демон systemd для автоматического запуска.
Тут пока не будет инструкций как это сделать, удачи.
