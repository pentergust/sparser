"""–°–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä.

–≠—Ç–æ –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ InlineKeyboardMarkup.
–û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤—Å–µ–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –±–æ—Ç–∞.
"""

from typing import Optional

from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup

from sp.enums import SHORT_DAY_NAMES

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–ª–∞—Å—Å–∞.
# –û–Ω–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±—Ä–∞ –∫–ª–∞—Å—Å–∞.
# –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –æ—Ç–≤—è–∑–∞—Ç–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç –∫–ª–∞—Å—Å–∞.
# –ê —Ç–∞–∫–∂–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å —Å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
# –µ—Å–ª–∏ —É–∫–∞–∂–µ—Ç —Å–≤–æ–π –∫–ª–∞—Å—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
PASS_SET_CL_MARKUP = InlineKeyboardMarkup(inline_keyboard=[[
    InlineKeyboardButton(
        text="–ë–µ–∑ –∫–ª–∞—Å—Å–∞", callback_data="pass"
    ),
    InlineKeyboardButton(
        text="–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞", callback_data="cl_features"
    )
]])


# –î–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤ --------------------------------------------------------

def get_week_keyboard(cl: str) -> InlineKeyboardMarkup:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —É—Ä–æ–∫–æ–≤.
    –ö–æ–≥–¥–∞ —Ä–µ–∂–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω "–Ω–∞ —Å–µ–≥–æ–¥–Ω—è".
    –¢–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–æ–º–æ–π –∏ –≤—ã–±–æ—Ä–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.

    Buttons:

    - home => –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω.
    - sc:{cl}:week => –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –Ω–µ–µ–¥–ª—é –¥–ª—è –∫–ª–∞—Å—Å–∞.
    - select_day:{cl} => –í—ã–±—Ä–∞—Ç—å –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

    :param cl: –ö–ª–∞—Å—Å –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
    :type cl: str
    :return: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.
    :rtype: InlineKeyboardMarkup
    """
    return InlineKeyboardMarkup(inline_keyboard=[[
        InlineKeyboardButton(text="üè†–î–æ–º–æ–π", callback_data="home"),
        InlineKeyboardButton(
            text="–ù–∞ –Ω–µ–¥–µ–ª—é", callback_data=f"sc:{cl}:week"
        ),
        InlineKeyboardButton(
            text="‚ñ∑", callback_data=f"select_day:{cl}"
        )
    ]])

def get_sc_keyboard(cl: str, relative_day: str) -> InlineKeyboardMarkup:
    """–í–æ–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —É—Ä–æ–∫–æ–≤.
    –ö–æ–≥–¥–∞ —Ä–µ–∂–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω "–Ω–∞ –Ω–µ–¥–µ–ª—é".
    –¢–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–æ–º–æ–π –∏ –≤—ã–±–æ—Ä–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.

    Buttons:

    - home => –í–æ–∑–≤—Ä–∞—Ç –≤ –¥–æ–º–∞—à–Ω–∏–π —Ä–∞–∑–¥–µ–ª.
    - sc:{cl}:today => –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –∫–ª–∞—Å—Å–∞.
    - select_day:{cl} => –í—ã–±—Ä–∞—Ç—å –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

    :param cl: –ö–ª–∞—Å—Å –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
    :type cl: str
    :param relative_day: –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.
    :type relative_day: str
    :return: –ö–¥–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–Ω–∞–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é.
    :rtype: InlineKeyboardMarkup
    """
    return InlineKeyboardMarkup(inline_keyboard=[[
        InlineKeyboardButton(text="üè†–î–æ–º–æ–π", callback_data="home"),
        InlineKeyboardButton(
            text=relative_day, callback_data=f"sc:{cl}:today"
        ),
        InlineKeyboardButton(text="‚ñ∑", callback_data=f"select_day:{cl}")
    ]])

def get_select_day_keyboard(cl: str, relative_day: str) -> InlineKeyboardMarkup:
    """–í–æ–∑–∞—Ä–∞—â–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤—ã–±–æ—Ä–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ –≤ —Ä–∞—Å—Å–ø–∏—Å–∞–Ω–∏—è.

    –ú—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.
    –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏.
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—è —É–∫–∑–∞–∞–Ω—ã–π –∫–ª–∞—Å—Å –≤ –∑–∞–ø—Ä–æ—Å.

    Buttons:

    - sc:{cl}:{0..6} => –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —É–∫–∑–∞–∞–Ω–Ω–æ–≥–æ –¥–Ω—è.
    - sc:{cl}:today => –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.
    - sc:{cl}:week => –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é.

    :param cl: –ö–ª–∞—Å—Å –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
    :type cl: str
    :param relative_day: –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.
    :type relative_day: str
    :return: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–Ω–∞–∏—è.
    :rtype: InlineKeyboardMarkup
    """
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text=x, callback_data=f"sc:{cl}:{i}")
            for i, x in enumerate(SHORT_DAY_NAMES)
        ],
        [
            InlineKeyboardButton(text="‚óÅ", callback_data="home"),
            InlineKeyboardButton(
                text=relative_day, callback_data=f"sc:{cl}:today"
            ),
            InlineKeyboardButton(
                text="–ù–µ–¥–µ–ª—è", callback_data=f"sc:{cl}:week"
            ),
        ]])

# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ----------------------------------------------------------

def get_other_keyboard(
    cl: Optional[str]=None,
    home_button: Optional[bool]=True
) -> InlineKeyboardMarkup:
    """–°–æ–±–∏—Ä–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.

    –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
    –ß—Ç–æ–±—ã —ç—Ç–∏ —Ä–∞–∑–¥–µ–ª—ã –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∏ –º–µ—Å—Ç–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –∏ –Ω–µ –ø—É–≥–∞–ª–∏
    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–∞–∑–Ω—ã—Ö –∫–Ω–æ–ø–æ—á–µ–∫.

    Buttons:

    - set_class => –°–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å.
    - count:lessons:main: => –ú–µ–Ω—é —Å—á—ë—Ç—á–∏–∫–æ–≤ –±–æ—Ç–∞.
    - updates:last:0:{cl}: => –ü–æ—Å–ª–µ–¥–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
    - tutorial:0 => –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±—â–µ–π —Å–ø—Ä–∞–≤–∫–∏.
    - intents => –†–∞–∑–¥–µ–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    - home => –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

    :param cl: –ö–ª–∞—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
    :type cl: Optional[str]
    :param home_button: –î–æ–±–∞–ª–≤–æ—è—Ç—å –ª–∏ –∫–Ω–æ–ø–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.
    :type home_button: Optional[bool]
    :return: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—ã –≤ –¥—Ä—É–≥–∏–µ —Ä–∞–∑–¥–µ–ª—ã.
    :rtype: InlineKeyboardMarkup
    """
    buttons = [
        [
            InlineKeyboardButton(
                text="‚öôÔ∏è –°–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å", callback_data="set_class"
            ),
            InlineKeyboardButton(
                text="üìä –°—á—ë—Ç—á–∏–∫–∏", callback_data="count:lessons:main:"
            ),
            InlineKeyboardButton(
                text="üìú –ò–∑–º–µ–Ω–µ–Ω–∏—è", callback_data=f"updates:last:0:{cl}:"
            ),
        ],
        [
            InlineKeyboardButton(
                text="üåü –û–±—É—á–µ–Ω–∏–µ", callback_data="tutorial:0"
            ),
            InlineKeyboardButton(text="üíº –ù–∞–º–µ—Ä–µ–Ω–∏—è", callback_data="intents"),
        ],
    ]

    if home_button:
        buttons[-1].append(
            InlineKeyboardButton(text="üè† –î–æ–º–æ–π", callback_data="home")
        )

    return InlineKeyboardMarkup(inline_keyboard=buttons)

def get_main_keyboard(
    cl: Optional[str]=None,
    relative_day: Optional[str]=None
) -> InlineKeyboardMarkup:
    """–í–æ–∑—Ä–∞—â–∞–µ—Ç –≥–ª–∞–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –±–æ—Ç–∞.

    –ì–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–∞–º—ã–º —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º
    —Ä–∞–∑–¥–µ–ª–∞–º –±–æ—Ç–∞, —Ç–∞–∫–∏–º –∫–∞–∫ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –∫–ª–∞—Å—Å–∞ –ø–æ
    —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø–æ–≤—â–µ–µ–Ω–∏–π.
    –ï—Å–ª–∏ –ø–æ–ª—å–∑–≤–æ–∞—Ç–µ–ª–π –Ω–µ —É–∫–∞–∑–∞–ª –∫–ª–∞—Å—Å - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –¥–æ–ø–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è
    –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, –Ω–æ –±–µ–∑ –∫–Ω–æ–ø–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–æ–º–æ–π.

    Buttons:

    - other => –í—ã–∑–æ–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.
    - notify => –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    - sc:{cl}:today => –ü–æ–ª—É—á–∞–µ–Ω–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –¥–ª—è –∫–ª–∞—Å—Å–∞.

    :param cl: –ö–ª–∞—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
    :type cl: Optional[str]
    :param relative_day: –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.
    :type relative_day: str
    :return: –ì–ª–∞–≤–Ω–∞—è (–¥–æ–º–∞—à–Ω–∞—è) –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –±–æ—Ç–∞.
    :rtype: InlineKeyboardMarkup
    """
    if cl is None:
        return get_other_keyboard(cl, home_button=False)

    return InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(text="üîß –ï—â—ë", callback_data="other"),
                InlineKeyboardButton(
                    text="üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è", callback_data="notify"
                ),
                InlineKeyboardButton(
                    text=f"üìö –ù–∞ {relative_day}", callback_data=f"sc:{cl}:today"
                ),
            ]
        ]
    )
